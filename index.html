<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gazella | Ton instant sucr√©</title>
    <link rel="icon" type="image/png" href="Gazelle.png" />
    <link rel="apple-touch-icon" href="Gazella_Logo.png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Poppins:wght@300;400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --rose-pale: #f6f2ef;
        --rose: #f5c6cc;
        --peche: #f5bdab;
        --text: #3a2f2f;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      body {
        background-color: var(--rose-pale);
        color: var(--text);
        scroll-behavior: smooth;
      }

      header {
        background-color: var(--rose);
        padding: 0.5rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1000; /* Augment√© pour √™tre au-dessus de tout */
      }

      header img {
        height: 80px;
      }

      nav {
        display: flex;
        align-items: center;
      }

      nav a {
        margin: 0 1rem;
        text-decoration: none;
        color: var(--text);
        font-weight: 500;
        transition: 0.3s;
      }

      nav a:hover {
        color: white;
      }

      /* Styles du bouton Hamburger (cach√© sur Desktop) */
      .hamburger {
        display: none;
        cursor: pointer;
        flex-direction: column;
        gap: 5px;
        z-index: 1001;
      }

      .bar {
        width: 25px;
        height: 3px;
        background-color: var(--text);
        transition: all 0.3s ease-in-out;
        border-radius: 5px;
      }

      .hero {
        text-align: center;
        padding: 6rem 2rem;
        background: linear-gradient(
            rgba(245, 198, 204, 0.8),
            rgba(246, 242, 239, 0.8)
          ),
          url("cover.jpg");
        background-size: auto;
        background-position: center;
        position: relative;
        animation: fadeIn 2s ease-in-out;
      }

      .hero-logo {
        width: 300px;
        margin-bottom: 1.5rem;
        animation: fadeIn 2s ease-in-out;
        transition: width 0.3s ease-out, opacity 0.3s ease-out;
      }

      .hero h2 {
        font-size: 2.5rem;
        font-family: "Playfair Display", serif;
        margin-bottom: 1rem;
      }

      .hero p {
        font-size: 1.2rem;
        margin-bottom: 2rem;
      }

      .hero button {
        background-color: var(--peche);
        border: none;
        padding: 1rem 2rem;
        border-radius: 50px;
        font-size: 1rem;
        cursor: pointer;
        color: white;
        transition: 0.3s;
      }

      .hero button:hover {
        background-color: var(--rose);
      }

      .products {
        text-align: center;
        padding: 4rem 2rem;
      }

      .products h3 {
        font-size: 2rem;
        margin-bottom: 2rem;
        font-family: "Playfair Display", serif;
      }

      .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        max-width: 1000px;
        margin: auto;
      }

      .product {
        background-color: white;
        border-radius: 20px;
        padding: 1.5rem;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      .product:hover {
        transform: translateY(-5px);
      }

      .product img {
        width: 100%;
        aspect-ratio: 1 / 1;
        object-fit: cover;
        border-radius: 15px;
        margin-bottom: 1rem;
      }

      .product h4 {
        margin-bottom: 0.5rem;
        font-size: 1.2rem;
      }

      .price {
        font-weight: 500;
        color: var(--peche);
        margin-top: 0.5rem;
        margin-bottom: 1rem;
      }

      .unavailable {
        color: #ff4444;
        font-size: 0.9rem;
        margin-top: 0.5rem;
      }

      .product-add-controls {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: auto;
      }

      .product-add-controls input[type="number"] {
        width: 60px;
        padding: 0.5rem;
        text-align: center;
        -moz-appearance: textfield;
        appearance: textfield;
      }

      .product-add-controls input[type="number"]::-webkit-outer-spin-button,
      .product-add-controls input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      .product-add-controls button {
        background-color: var(--rose);
        border: none;
        padding: 0.6rem 1rem;
        border-radius: 50px;
        font-size: 0.85rem;
        cursor: pointer;
        color: white;
        transition: 0.3s;
        flex-grow: 1;
      }

      .product-add-controls button:hover {
        background-color: var(--rose-pale);
        color: var(--text);
      }

      .product-add-controls button.added-feedback {
        background-color: #28a745;
        animation: fadeOutGreen 1.5s forwards;
      }

      @keyframes fadeOutGreen {
        0% { background-color: #28a745; color: white; transform: scale(1.05); }
        50% { background-color: #28a745; color: white; transform: scale(1); }
        100% { background-color: var(--rose); color: white; }
      }

      .professionals {
        background-color: var(--rose-pale);
        color: var(--text);
        padding: 4rem 2rem;
        text-align: center;
      }

      .professionals h3 {
        font-size: 2rem;
        margin-bottom: 1.5rem;
        font-family: "Playfair Display", serif;
      }

      .professionals p {
        font-size: 1.1rem;
        margin-bottom: 2rem;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
      }

      .professional-buttons {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        flex-wrap: wrap;
      }

      .professional-buttons a {
        background-color: var(--peche);
        color: white;
        padding: 1rem 2rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: bold;
        transition: background-color 0.3s ease, transform 0.2s ease-in-out;
      }

      .professional-buttons a:hover {
        background-color: var(--rose);
        transform: translateY(-3px);
      }

      .find-us {
        background-color: white;
        color: var(--text);
        padding: 4rem 2rem;
        text-align: center;
      }

      .find-us h3 {
        font-size: 2rem;
        margin-bottom: 1.5rem;
        font-family: "Playfair Display", serif;
      }

      .find-us p {
        font-size: 1.1rem;
        margin-bottom: 2rem;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
      }

      .location-list {
        list-style: none;
        padding: 0;
        margin: 0 auto 2rem auto;
        max-width: 600px;
      }

      .location-list li {
        background-color: var(--rose-pale);
        padding: 1rem 1.5rem;
        margin-bottom: 0.8rem;
        border-radius: 10px;
        text-align: left;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      }

      .location-list li span {
        font-weight: 500;
      }

      .location-list li a {
        color: var(--peche);
        text-decoration: none;
        font-weight: bold;
        transition: color 0.3s ease;
      }

      .location-list li a:hover {
        color: var(--text);
      }

      .contact {
        background-color: var(--peche);
        color: white;
        padding: 4rem 2rem;
        text-align: center;
      }

      .contact h3 {
        font-size: 2rem;
        margin-bottom: 1rem;
        font-family: "Playfair Display", serif;
      }

      .contact p {
        margin-bottom: 2rem;
        font-size: 1rem;
      }

      form {
        max-width: 500px;
        margin: auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      input,
      textarea,
      select {
        padding: 1rem;
        border-radius: 10px;
        border: none;
        font-size: 1rem;
        outline: none;
        background-color: white;
        color: var(--text);
      }

      .form-group {
        text-align: left;
        color: white;
        font-size: 1rem;
      }

      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
      }

      .radio-group {
        display: flex;
        gap: 15px;
        margin-top: 0.5rem;
      }

      .radio-group input[type="radio"] {
        margin-right: 5px;
        transform: scale(1.2);
      }

      .radio-group label {
        display: flex;
        align-items: center;
        margin-bottom: 0;
      }

      .product-selector-group {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
      }

      .product-selector-group select {
        flex-grow: 1;
        min-width: 150px;
      }

      .product-selector-group input[type="number"] {
        width: 80px;
        text-align: center;
        -moz-appearance: textfield;
      }

      .product-selector-group input[type="number"]::-webkit-outer-spin-button,
      .product-selector-group input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      .add-product-btn {
        background-color: var(--rose);
        border: none;
        padding: 0.8rem 1.2rem;
        border-radius: 50px;
        font-size: 0.9rem;
        cursor: pointer;
        color: white;
        transition: 0.3s;
        flex-shrink: 0;
      }

      .add-product-btn:hover {
        background-color: var(--rose-pale);
        color: var(--text);
      }

      #selected-products-summary {
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 10px;
        padding: 1rem;
        text-align: left;
        color: var(--text);
        font-size: 0.9rem;
        min-height: 50px;
      }

      #selected-products-summary p {
        margin-bottom: 0.3rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      #selected-products-summary p:last-child {
        margin-bottom: 0;
      }

      .remove-product-btn {
        background: none;
        border: none;
        color: #ff4444;
        cursor: pointer;
        font-size: 1rem;
        margin-left: 10px;
      }

      button[type="submit"] {
        background-color: var(--rose);
        border: none;
        padding: 1rem;
        border-radius: 50px;
        font-size: 1rem;
        cursor: pointer;
        color: white;
        transition: 0.3s;
      }

      button[type="submit"]:hover {
        background-color: var(--rose-pale);
        color: var(--text);
      }

      .social-buttons {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        margin-top: 2rem;
        flex-wrap: wrap;
      }

      .social-buttons a {
        display: inline-flex;
        align-items: center;
        color: white;
        padding: 1rem 2rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: bold;
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      }

      .social-buttons a:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .whatsapp {
        background-color: #25d366;
      }

      .instagram {
        background-image: linear-gradient(
          45deg,
          #feda75,
          #fa7e1e,
          #d62976,
          #962fbf,
          #4f5bd5
        );
      }

      footer {
        background-color: var(--rose);
        text-align: center;
        padding: 1rem;
        font-size: 0.9rem;
      }

      .cart-icon {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: var(--peche);
        color: white;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        z-index: 100;
        transition: background-color 0.3s ease, transform 0.2s ease-in-out;
      }

      .cart-icon:hover {
        transform: scale(1.1);
      }

      .cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: var(--rose);
        color: white;
        border-radius: 50%;
        padding: 0.2rem 0.5rem;
        font-size: 0.8rem;
        font-weight: bold;
        display: flex;
        justify-content: center;
        align-items: center;
        min-width: 25px;
        height: 25px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      @keyframes cartPulse {
        0% { transform: scale(1); background-color: var(--peche); }
        50% { transform: scale(1.2); background-color: #28a745; }
        100% { transform: scale(1); background-color: var(--peche); }
      }

      .cart-icon.added {
        animation: cartPulse 0.8s ease-in-out;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        /* Modification pour le Header Mobile */
        header {
          flex-direction: row; /* Garder ligne horizontale */
          justify-content: space-between;
          padding: 0.5rem 1.5rem;
          position: sticky;
        }

        /* Afficher le burger menu sur mobile */
        .hamburger {
          display: flex;
        }

        /* Styles de la navigation mobile (Menu d√©roulant) */
        nav {
          position: absolute;
          top: 100%;
          left: 0;
          width: 100%;
          background-color: var(--rose);
          flex-direction: column;
          align-items: center;
          gap: 0;
          
          /* Animation d'ouverture */
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.4s ease-in-out;
          box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* Classe ajout√©e par JS pour ouvrir le menu */
        nav.active {
          max-height: 400px; /* Assez grand pour tout le contenu */
          padding-bottom: 1rem;
          border-top: 1px solid rgba(255,255,255,0.3);
        }

        nav a {
          margin: 1rem 0;
          width: 100%;
          text-align: center;
          display: block;
          padding: 0.5rem;
        }
        
        nav a:hover {
            background-color: rgba(255,255,255,0.2);
        }

        /* Animation du burger en croix */
        .hamburger.active .bar:nth-child(2) {
            opacity: 0;
        }
        .hamburger.active .bar:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }
        .hamburger.active .bar:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        /* Autres styles responsives existants */
        .hero h2 {
          font-size: 2rem;
        }

        .hero p {
          font-size: 1rem;
        }

        .product-grid {
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        .product-selector-group {
            flex-direction: column;
            gap: 0.8rem;
        }
        .product-selector-group select,
        .product-selector-group input[type="number"],
        .add-product-btn {
            width: 100%;
        }

        .social-buttons a {
            padding: 0.8rem 1.5rem;
            font-size: 0.9rem;
        }

        .cart-icon {
          width: 50px;
          height: 50px;
          font-size: 1.5rem;
          bottom: 15px;
          right: 15px;
        }
        .cart-count {
          padding: 0.1rem 0.4rem;
          font-size: 0.7rem;
          min-width: 20px;
          height: 20px;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <header>
      <img src="Gazella_Logo.png" alt="Logo Gazella" />
      
      <!-- Bouton Hamburger -->
      <div class="hamburger" onclick="toggleMenu()">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>

      <nav id="navbar">
        <a href="#produits" onclick="closeMenu()">Produits</a>
        <a href="#professionals" onclick="closeMenu()">Professionnels</a>
        <a href="#find-us" onclick="closeMenu()">Nos points de vente</a>
        <a href="#contact" onclick="closeMenu()">Contact</a>
      </nav>
    </header>

    <section class="hero">
      <img src="Gazella_Logo.png" alt="Logo Gazella" class="hero-logo" />
      <h2>Ton instant sucr√©</h2>
      <p>
        Des g√¢teaux faits maison avec passion et des saveurs qui font fondre le
        c≈ìur.
      </p>
      <button
        onclick="document.getElementById('produits').scrollIntoView({behavior:'smooth'})"
      >
        D√©couvrir nos douceurs
      </button>
    </section>

    <section id="produits" class="products">
      <h3>Nos gourmandises</h3>
      <div id="product-grid" class="product-grid">
        <!-- Products will be loaded here dynamically -->
      </div>
    </section>

    <!-- NOUVELLE SECTION POUR LES PROFESSIONNELS -->
    <section id="professionals" class="professionals">
      <h3>Vous √™tes un professionnel ?</h3>
      <p>
        Gazella propose des partenariats pour la distribution de nos p√¢tisseries
        artisanales. Offrez √† vos clients l'authenticit√© et la saveur des cr√©ations faites avec amour.
      </p>
      <div class="professional-buttons">
        <a href="#contact">Contactez-nous pour une distribution</a>
      </div>
    </section>

    <!-- NOUVELLE SECTION POUR LES POINTS DE VENTE -->
    <section id="find-us" class="find-us">
      <h3>Trouvez nos produits pr√®s de chez vous</h3>
      <p>
        D√©couvrez o√π vous pouvez retrouver les d√©lices Gazella chez nos partenaires locaux.
      </p>
      <ul class="location-list">
        <li>
          <span>Le march√© Granby</span>
          <a href="https://www.google.ca/maps/place/Le+march%C3%A9+Granby/@45.3983625,-72.7226518,17z/data=!4m6!3m5!1s0x4cc9cf280f71b8fd:0xbd2d333f9a0c182a!8m2!3d45.3982162!4d-72.7227657!16s%2Fg%2F11w_dh9zkw?hl=fr&entry=ttu&g_ep=EgoyMDI1MTExMC4wIKXMDSoASAFQAw%3D%3D" target="_blank">Voir sur la carte</a>
        </li>
        <li>
          <span>Caf√© Douce Heure</span>
          <a href="https://maps.app.goo.gl/exemple2" target="_blank">Voir sur la carte</a>
        </li>
        <li>
          <span>√âpicerie Fine Gourmande</span>
          <a href="https://maps.app.goo.gl/exemple3" target="_blank">Voir sur la carte</a>
        </li>
        <!-- Ajoutez d'autres points de vente ici -->
      </ul>
      <p>
        *Liste non exhaustive, mise √† jour r√©guli√®rement.
      </p>
    </section>

    <script>
      const productData = {
        "products": [
          {
            "id": 1,
            "name": "Tiramisu",
            "description": "Un classique italien revisit√©, fondant et parfum√© au caf√©.",
            "image": "product3.jpg",
            "category": "Desserts italiens",
            "price": 25.0,
            "servings": 6,
            "allergens": ["≈ìufs", "lait", "gluten"],
            "available": true
          },
          {
            "id": 2,
            "name": "Tiramisu Pistache",
            "description": "Un tiramisu onctueux √† la pistache, subtil et gourmand.",
            "image": "product5.jpg",
            "category": "Desserts italiens",
            "price": 28.0,
            "servings": 6,
            "allergens": ["≈ìufs", "lait", "fruits √† coque", "gluten"],
            "available": true
          },
          {
            "id": 3,
            "name": "Tiramisu Chocolat",
            "description": "Une explosion de cacao pour les amoureux du chocolat.",
            "image": "product6.jpg",
            "category": "Desserts italiens",
            "price": 28.0,
            "servings": 6,
            "allergens": ["≈ìufs", "lait", "gluten"],
            "available": true
          },
          {
            "id": 4,
            "name": "Box Mini-Brownies",
            "description": "De petits carr√©s moelleux au chocolat, √† partager sans mod√©ration.",
            "image": "brownies.jpg",
            "category": "Box & Assortiments",
            "price": 20.0,
            "quantity": 12,
            "allergens": ["≈ìufs", "lait", "gluten", "fruits √† coque"],
            "available": true
          },
          {
            "id": 5,
            "name": "Cheesecake",
            "description": "Une s√©lection de cheesecakes aux saveurs vari√©es et cr√©meuses.",
            "image": "product1.jpg",
            "category": "G√¢teaux am√©ricains",
            "price": 30.0,
            "servings": 8,
            "variants": ["Nature", "Fruits rouges", "Caramel", "Chocolat"],
            "allergens": ["≈ìufs", "lait", "gluten"],
            "available": true
          },
          {
            "id": 6,
            "name": "Cookies",
            "description": "Des cookies dor√©s, croustillants √† l'ext√©rieur et fondants √† l'int√©rieur.",
            "image": "product2.jpg",
            "category": "Biscuits",
            "price": 15.0,
            "quantity": 8,
            "variants": ["Chocolat", "Double chocolat", "Chocolat blanc & macadamia"],
            "allergens": ["≈ìufs", "lait", "gluten", "fruits √† coque"],
            "available": true
          }
        ]
      };

      // Function to load and display products
      function loadProducts() {
        const productGrid = document.getElementById("product-grid");

        productData.products.forEach((product) => {
          const productElement = document.createElement("div");
          productElement.className = "product";

          productElement.innerHTML = `
            <img src="${product.image}" alt="${product.name}" />
            <h4>${product.name}</h4>
            <p>${product.description}</p>
            <p class="price">${product.price.toFixed(2)} CAD</p>
            ${
              product.available
                ? `
                <div class="product-add-controls">
                    <input type="number" value="1" min="1" id="quantity-${product.id}" />
                    <button id="add-btn-${product.id}" onclick="addProductToOrder(${product.id}, event)">Ajouter</button>
                </div>
                `
                : '<p class="unavailable">Indisponible</p>'
            }
          `;

          productGrid.appendChild(productElement);
        });
      }

      let selectedOrder = []; // Tableau pour stocker les produits s√©lectionn√©s

      function populateProductSelector() {
        const productSelect = document.getElementById("product-select");
        productSelect.innerHTML = '<option value="">-- Choisir un produit --</option>'; // Option par d√©faut

        productData.products.forEach(product => {
          if (product.available) {
            const option = document.createElement("option");
            option.value = product.id;
            option.textContent = `${product.name} (${product.price.toFixed(2)}CAD)`;
            productSelect.appendChild(option);
          }
        });
      }

      function addProductToOrder(productIdFromButton = null, event = null) {
        let selectedProductId;
        let quantity;
        let targetButton = null;

        if (productIdFromButton) {
          selectedProductId = productIdFromButton;
          const quantityInput = document.getElementById(`quantity-${productIdFromButton}`);
          quantity = parseInt(quantityInput.value);
          if (event) {
            targetButton = event.target;
          }
        } else {
          const productSelect = document.getElementById("product-select");
          const quantityInput = document.getElementById("product-quantity");
          selectedProductId = parseInt(productSelect.value);
          quantity = parseInt(quantityInput.value);
          targetButton = document.getElementById("add-to-order-btn");
        }

        if (!selectedProductId || quantity <= 0 || isNaN(quantity)) {
          alert("Veuillez s√©lectionner un produit et entrer une quantit√© valide.");
          return;
        }

        const product = productData.products.find(p => p.id === selectedProductId);

        if (product) {
          const existingItemIndex = selectedOrder.findIndex(item => item.id === product.id);

          if (existingItemIndex > -1) {
            selectedOrder[existingItemIndex].quantity += quantity;
          } else {
            selectedOrder.push({
              id: product.id,
              name: product.name,
              price: product.price,
              quantity: quantity
            });
          }

          renderOrderSummary();
          updateCartIcon(); // NOUVEAU: Mettre √† jour l'ic√¥ne du panier
          animateCartIcon(); // NOUVEAU: Animer l'ic√¥ne du panier

          if (targetButton) {
            const originalText = targetButton.textContent;
            targetButton.textContent = "Ajout√© !";
            targetButton.classList.add('added-feedback');
            targetButton.disabled = true;

            setTimeout(() => {
              targetButton.textContent = originalText;
              targetButton.classList.remove('added-feedback');
              targetButton.disabled = false;
            }, 1500);
          }

          if (!productIdFromButton) {
            document.getElementById("product-select").value = "";
            document.getElementById("product-quantity").value = 1;
          }
        }
      }

      function removeProductFromOrder(productId) {
        selectedOrder = selectedOrder.filter(item => item.id !== productId);
        renderOrderSummary();
        updateCartIcon(); // NOUVEAU: Mettre √† jour l'ic√¥ne du panier
      }

      function renderOrderSummary() {
        const summaryDiv = document.getElementById("selected-products-summary");
        summaryDiv.innerHTML = "";

        if (selectedOrder.length === 0) {
          summaryDiv.innerHTML = "<p>Aucun produit s√©lectionn√©.</p>";
          return;
        }

        let total = 0;
        selectedOrder.forEach(item => {
          const itemTotal = item.price * item.quantity;
          total += itemTotal;

          const p = document.createElement("p");
          p.innerHTML = `
            <span>${item.name} x ${item.quantity}</span>
            <span>${itemTotal.toFixed(2)} CAD
              <button class="remove-product-btn" onclick="removeProductFromOrder(${item.id})">‚úñ</button>
            </span>
          `;
          summaryDiv.appendChild(p);
        });

        const totalP = document.createElement("p");
        totalP.style.fontWeight = "bold";
        totalP.style.marginTop = "10px";
        totalP.innerHTML = `<span>Total commande:</span> <span>${total.toFixed(2)} CAD</span>`;
        summaryDiv.appendChild(totalP);

        updateContactMessage();
      }

      function updateContactMessage() {
        const messageTextarea = document.getElementById("contact-message");
        const nameInput = document.getElementById("contact-name");
        const contactInput = document.getElementById("contact-email");
        const allergyInput = document.getElementById("contact-allergies");
        const deliveryMethod = document.querySelector('input[name="MethodeRecuperation"]:checked');
        const deliveryDate = document.getElementById("delivery-date");
        const deliveryTime = document.getElementById("delivery-time"); // NOUVEAU

        const clientName = nameInput.value.trim();
        const clientContact = contactInput.value.trim();
        const clientAllergies = allergyInput.value.trim();
        const selectedMethod = deliveryMethod ? deliveryMethod.value : "Non sp√©cifi√©e";
        const selectedDate = deliveryDate.value ? new Date(deliveryDate.value).toLocaleDateString('fr-FR') : "Non sp√©cifi√©e";
        const selectedTime = deliveryTime.value ? deliveryTime.value : "Non sp√©cifi√©e"; // NOUVEAU


        let message = "Bonjour, je souhaiterais commander :\n\n";

        if (selectedOrder.length > 0) {
          selectedOrder.forEach(item => {
            message += `- ${item.name} x ${item.quantity} (${(item.price * item.quantity).toFixed(2)}CAD)\n`;
          });
          const total = selectedOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);
          message += `\nTotal estim√© : ${total.toFixed(2)}CAD\n\n`;
        } else {
          message += "Aucun produit s√©lectionn√© pour le moment.\n\n";
        }

        message += `M√©thode de r√©cup√©ration : ${selectedMethod}\n`;
        message += `Date souhait√©e : ${selectedDate}\n`;
        message += `Plage horaire souhait√©e : ${selectedTime}\n\n`; // NOUVEAU

        if (clientAllergies) {
          message += `D√©claration allergies/intol√©rances: ${clientAllergies}\n\n`;
        }

        if (clientName) {
          message += `Mon nom est ${clientName}`;
        } else {
          message += `Mon nom est [Votre Nom]`;
        }

        if (clientContact) {
          message += ` et mon contact est ${clientContact}.`;
        } else {
          message += ` et mon contact est [Votre Contact].`;
        }

        messageTextarea.value = message;

        const whatsappLink = document.querySelector(".whatsapp");
        let whatsappBaseUrl = "https://wa.me/15147029219?text=";
        whatsappLink.href = whatsappBaseUrl + encodeURIComponent(message);
      }

      function updateCartIcon() {
        const cartCountElement = document.getElementById("cart-count");
        const totalItems = selectedOrder.reduce((sum, item) => sum + item.quantity, 0);
        cartCountElement.textContent = totalItems;
      }

      function animateCartIcon() {
        const cartIcon = document.getElementById("cart-icon");
        cartIcon.classList.add("added");
        setTimeout(() => {
          cartIcon.classList.remove("added");
        }, 800); // Dur√©e de l'animation doit correspondre √† la dur√©e de l'animation CSS (cartPulse)
      }


      document.addEventListener("DOMContentLoaded", () => {
        loadProducts();
        populateProductSelector();
        renderOrderSummary(); // Initialise le r√©capitulatif
        updateCartIcon(); // NOUVEAU: Initialiser l'ic√¥ne du panier au chargement

        const heroLogo = document.querySelector(".hero-logo");
        const initialLogoWidth = 300;
        const scrollThreshold = 300;

        window.addEventListener("scroll", () => {
          const scrollY = window.scrollY;

          let newWidth = initialLogoWidth - scrollY;
          if (newWidth < 0) newWidth = 0;

          let newOpacity = 1 - (scrollY / scrollThreshold);
          if (newOpacity < 0) newOpacity = 0;

          heroLogo.style.width = `${newWidth}px`;
          heroLogo.style.opacity = newOpacity;
        });

        document.getElementById("add-to-order-btn").addEventListener("click", () => addProductToOrder());

        // NOUVEAU: G√©rer le clic sur l'ic√¥ne du panier
        document.getElementById("cart-icon").addEventListener("click", () => {
            document.getElementById("contact").scrollIntoView({ behavior: "smooth" });
        });

        // √âcouteurs d'√©v√©nements pour les champs de nom, contact, allergies, m√©thode, date et HEURE
        document.getElementById("contact-name").addEventListener("input", updateContactMessage);
        document.getElementById("contact-email").addEventListener("input", updateContactMessage);
        document.getElementById("contact-allergies").addEventListener("input", updateContactMessage);
        document.querySelectorAll('input[name="MethodeRecuperation"]').forEach(radio => {
            radio.addEventListener('change', updateContactMessage);
        });
        document.getElementById("delivery-date").addEventListener("change", updateContactMessage);
        document.getElementById("delivery-time").addEventListener("change", updateContactMessage); // NOUVEAU


        // --- NOUVEAU CODE POUR L'ENVOI DU FORMULAIRE √Ä GOOGLE SHEETS ---
        const orderForm = document.getElementById("orderForm");
        orderForm.addEventListener("submit", async (e) => {
          e.preventDefault();

          const submitButton = orderForm.querySelector('button[type="submit"]');
          submitButton.disabled = true;
          submitButton.textContent = "Envoi en cours...";

          const formData = new FormData(orderForm);
          const data = {};
          for (let [key, value] of formData.entries()) {
            data[key] = value;
          }
          // Ajout des d√©tails de la commande s√©lectionn√©e dans les donn√©es du formulaire
          data["ProduitsCommandes"] = JSON.stringify(selectedOrder);


          const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwwru1IfME0W4ycFoVrXdZWAyK9vNiwrhpGn6RZRbE9y0WAi01Em5vzv6p7TDUQ0CQrbA/exec";

          try {
            const response = await fetch(SCRIPT_URL, {
              method: "POST",
              mode: "no-cors",
              cache: "no-cache",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: new URLSearchParams(data).toString()
            });

            alert("Votre commande a √©t√© envoy√©e avec succ√®s ! Nous vous contacterons bient√¥t.");
            orderForm.reset();
            selectedOrder = [];
            renderOrderSummary();
            updateContactMessage();
            updateCartIcon(); // R√©initialise l'ic√¥ne du panier apr√®s envoi
          } catch (error) {
            console.error("Erreur lors de l'envoi du formulaire :", error);
            alert("Une erreur est survenue lors de l'envoi de votre commande. Veuillez r√©essayer ou nous contacter directement.");
          } finally {
            submitButton.disabled = false;
            submitButton.textContent = "Envoyer le message / la commande";
          }
        });
        // --- FIN DU NOUVEAU CODE POUR L'ENVOI DU FORMULAIRE ---
      });

      // --- SCRIPT DU MENU HAMBURGER ---
      function toggleMenu() {
        const nav = document.getElementById("navbar");
        const hamburger = document.querySelector(".hamburger");
        nav.classList.toggle("active");
        hamburger.classList.toggle("active");
      }

      function closeMenu() {
        const nav = document.getElementById("navbar");
        const hamburger = document.querySelector(".hamburger");
        if (nav.classList.contains("active")) {
            nav.classList.remove("active");
            hamburger.classList.remove("active");
        }
      }
    </script>

    <section id="contact" class="contact">
      <h3>Contact & Commandes</h3>
      <p>
        Une envie sucr√©e ? Passez commande directement ci-dessous ou laissez-nous un message.
      </p>

      <form id="orderForm">
        <input type="text" id="contact-name" name="NomClient" placeholder="Votre nom" required />
        <input type="text" id="contact-email" name="ContactClient" placeholder="Votre email ou num√©ro de t√©l√©phone" required />

        <textarea
          rows="3"
          id="contact-allergies"
          name="Allergies"
          placeholder="D√©clarez ici vos allergies ou produits √† √©viter (ex: sans lactose, sans noix...)"
        ></textarea>

        <!-- NOUVEAUX CHAMPS : M√©thode de r√©cup√©ration et Date -->
        <div class="form-group">
          <label>M√©thode de r√©cup√©ration :</label>
          <div class="radio-group">
            <input type="radio" id="pickup" name="MethodeRecuperation" value="Ramassage" checked>
            <label for="pickup">Ramassage</label>

            <input type="radio" id="delivery" name="MethodeRecuperation" value="Livraison">
            <label for="delivery">Livraison</label>
          </div>
        </div>

        <div class="form-group">
            <label for="delivery-date">Date souhait√©e :</label>
            <input type="date" id="delivery-date" name="DateSouhaitee" required>
        </div>

        <!-- NOUVEAU CHAMP : Plage horaire souhait√©e -->
        <div class="form-group">
            <label for="delivery-time">Plage horaire souhait√©e :</label>
            <select id="delivery-time" name="PlageHoraireSouhaitee" required>
                <option value="">-- Choisir une plage horaire --</option>
                <option value="9h-12h">9h - 12h</option>
                <option value="12h-15h">12h - 15h</option>
                <option value="15h-18h">15h - 18h</option>
                <option value="18h-21h">18h - 21h</option>
                <option value="Flexible">Flexible</option>
            </select>
        </div>


        <!-- S√©lecteur de produit et quantit√© (peut √™tre masqu√© ou r√©utilis√© comme un fallback) -->
        <div class="product-selector-group">
          <select id="product-select"></select>
          <input type="number" id="product-quantity" value="1" min="1" />
          <button type="button" id="add-to-order-btn" class="add-product-btn">Ajouter depuis la liste</button>
        </div>

        <!-- R√©capitulatif de la commande -->
        <div id="selected-products-summary">
          <p>Aucun produit s√©lectionn√©.</p>
        </div>

        <textarea
          rows="5"
          id="contact-message"
          name="DetailsCommande"
          placeholder="Votre message ou commande..."
          required
        ></textarea>
        <button type="submit">Envoyer le message / la commande</button>
      </form>

      <!-- Conteneur pour les boutons de r√©seaux sociaux -->
      <div class="social-buttons">
        <a class="whatsapp" href="https://wa.me/15147029219" target="_blank"
          >üì± Commander via WhatsApp</a
        >
        <!-- Nouveau bouton Instagram -->
        <a class="instagram" href="https://www.instagram.com/gazella_sweet/?igsh=MXJ1bGcxb25oMmJ6cw%3D%3D" target="_blank"
          >üì∏ Suivez-nous sur Instagram</a
        >
      </div>
    </section>

    <!-- FOOTER AVEC MENTION GRANBY -->
    <footer>¬© 2025 Gazella ‚Äî Fait avec amour √† Granby, Qu√©bec üç∞</footer>

    <!-- Ic√¥ne de panier flottante -->
    <div id="cart-icon" class="cart-icon">
        üõí<span id="cart-count" class="cart-count">0</span>
    </div>
  </body>
</html>
