<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gazella | Ton instant sucr√©</title>
    <link rel="icon" type="image/png" href="Gazelle.png" />
    <link rel="apple-touch-icon" href="Gazella_Logo.png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Poppins:wght@300;400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --rose-pale: #f6f2ef;
        --rose: #f5c6cc;
        --peche: #f5bdab;
        --text: #3a2f2f;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      body {
        background-color: var(--rose-pale);
        color: var(--text);
        scroll-behavior: smooth;
        overflow-x: hidden; /* Emp√™che le d√©filement horizontal ind√©sirable */
      }

      header {
        background-color: var(--rose);
        padding: 0.5rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1000; /* Z-index √©lev√© pour passer au-dessus de tout */
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      }

      header img {
        height: 60px; /* Logo l√©g√®rement ajust√© */
        transition: 0.3s;
      }

      /* Styles de base pour la navigation (Desktop) */
      nav {
        display: flex;
        align-items: center;
      }

      nav a {
        margin: 0 1rem;
        text-decoration: none;
        color: var(--text);
        font-weight: 500;
        transition: 0.3s;
        font-size: 1rem;
      }

      nav a:hover {
        color: white;
      }

      /* Style du bouton Hamburger (cach√© sur Desktop) */
      .hamburger {
        display: none;
        cursor: pointer;
        flex-direction: column;
        gap: 5px;
        background: none;
        border: none;
      }

      .hamburger span {
        display: block;
        width: 25px;
        height: 3px;
        background-color: var(--text);
        border-radius: 5px;
        transition: 0.3s;
      }

      /* --- HERO SECTION --- */
      .hero {
        text-align: center;
        padding: 6rem 2rem;
        background: linear-gradient(
            rgba(245, 198, 204, 0.8),
            rgba(246, 242, 239, 0.8)
          ),
          url("cover.jpg");
        background-size: cover; /* Chang√© √† cover pour mieux remplir */
        background-position: center;
        position: relative;
        animation: fadeIn 2s ease-in-out;
      }

      .hero-logo {
        width: 300px;
        margin-bottom: 1.5rem;
        animation: fadeIn 2s ease-in-out;
        transition: width 0.3s ease-out, opacity 0.3s ease-out;
      }

      .hero h2 {
        font-size: 2.5rem;
        font-family: "Playfair Display", serif;
        margin-bottom: 1rem;
      }

      .hero p {
        font-size: 1.2rem;
        margin-bottom: 2rem;
      }

      .hero button {
        background-color: var(--peche);
        border: none;
        padding: 1rem 2rem;
        border-radius: 50px;
        font-size: 1rem;
        cursor: pointer;
        color: white;
        transition: 0.3s;
      }

      .hero button:hover {
        background-color: var(--rose);
      }

      /* --- PRODUCTS SECTION --- */
      .products {
        text-align: center;
        padding: 4rem 2rem;
      }

      .products h3 {
        font-size: 2rem;
        margin-bottom: 2rem;
        font-family: "Playfair Display", serif;
      }

      .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        max-width: 1000px;
        margin: auto;
      }

      .product {
        background-color: white;
        border-radius: 20px;
        padding: 1.5rem;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      .product:hover {
        transform: translateY(-5px);
      }

      .product img {
        width: 100%;
        aspect-ratio: 1 / 1;
        object-fit: cover;
        border-radius: 15px;
        margin-bottom: 1rem;
      }

      .product h4 {
        margin-bottom: 0.5rem;
        font-size: 1.2rem;
      }

      .price {
        font-weight: 500;
        color: var(--peche);
        margin-top: 0.5rem;
        margin-bottom: 1rem;
      }

      .unavailable {
        color: #ff4444;
        font-size: 0.9rem;
        margin-top: 0.5rem;
      }

      .product-add-controls {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: auto;
      }

      .product-add-controls input[type="number"] {
        width: 50px;
        padding: 0.5rem;
        text-align: center;
        border: 1px solid #ddd;
        border-radius: 5px;
      }

      .product-add-controls button {
        background-color: var(--rose);
        border: none;
        padding: 0.6rem 1rem;
        border-radius: 50px;
        font-size: 0.85rem;
        cursor: pointer;
        color: white;
        transition: 0.3s;
        flex-grow: 1;
      }

      .product-add-controls button.added-feedback {
        background-color: #28a745;
        animation: fadeOutGreen 1.5s forwards;
      }

      @keyframes fadeOutGreen {
        0% { background-color: #28a745; color: white; transform: scale(1.05); }
        50% { background-color: #28a745; color: white; transform: scale(1); }
        100% { background-color: var(--rose); color: white; }
      }

      /* --- OTHER SECTIONS --- */
      .professionals, .find-us, .contact {
        padding: 4rem 2rem;
        text-align: center;
      }

      .professionals { background-color: var(--rose-pale); }
      .find-us { background-color: white; }
      .contact { background-color: var(--peche); color: white; }

      .professionals h3, .find-us h3, .contact h3 {
        font-size: 2rem;
        margin-bottom: 1.5rem;
        font-family: "Playfair Display", serif;
      }

      .professional-buttons a, .social-buttons a {
        background-color: var(--peche);
        color: white;
        padding: 1rem 2rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: bold;
        transition: 0.3s;
        display: inline-block;
        margin: 0.5rem;
      }
      
      .social-buttons a.whatsapp { background-color: #25d366; }
      .social-buttons a.instagram { background-image: linear-gradient(45deg, #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5); }

      .professional-buttons a:hover, .social-buttons a:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      }

      .location-list {
        list-style: none;
        padding: 0;
        margin: 0 auto 2rem auto;
        max-width: 600px;
      }

      .location-list li {
        background-color: var(--rose-pale);
        padding: 1rem 1.5rem;
        margin-bottom: 0.8rem;
        border-radius: 10px;
        text-align: left;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: var(--text);
      }
      
      .location-list li a { color: var(--peche); text-decoration: none; font-weight: bold; }

      /* --- FORMULAIRE --- */
      form {
        max-width: 500px;
        margin: auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      input, textarea, select {
        padding: 1rem;
        border-radius: 10px;
        border: none;
        font-size: 1rem;
        outline: none;
        width: 100%;
      }

      .form-group { text-align: left; }
      .radio-group { display: flex; gap: 15px; margin-top: 0.5rem; }
      .radio-group label { margin: 0; display: flex; align-items: center; gap: 5px; }

      .product-selector-group { display: flex; gap: 10px; flex-wrap: wrap; }
      .product-selector-group select { flex: 1; }
      
      .add-product-btn, button[type="submit"] {
        background-color: var(--rose);
        border: none;
        padding: 1rem;
        border-radius: 50px;
        color: white;
        cursor: pointer;
        font-weight: bold;
      }

      .add-product-btn:hover, button[type="submit"]:hover { background-color: var(--rose-pale); color: var(--text); }

      #selected-products-summary {
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 10px;
        padding: 1rem;
        text-align: left;
        color: var(--text);
      }

      .remove-product-btn { background: none; border: none; color: red; font-size: 1.2rem; cursor: pointer; float: right; }

      footer {
        background-color: var(--rose);
        text-align: center;
        padding: 1rem;
        font-size: 0.9rem;
      }

      /* --- PANIER --- */
      .cart-icon {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: var(--peche);
        color: white;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        z-index: 999;
      }

      .cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: var(--rose);
        padding: 0.2rem 0.5rem;
        border-radius: 50%;
        font-size: 0.8rem;
        font-weight: bold;
      }

      /* ========================================= */
      /* R√âPONSIVIT√â MOBILE (Modifications Cl√©s) */
      /* ========================================= */
      @media (max-width: 768px) {
        
        /* 1. Header & Navigation */
        header {
          padding: 0.8rem 1.5rem;
          /* On garde row pour aligner logo et burger */
          flex-direction: row; 
        }

        /* On affiche le burger */
        .hamburger {
          display: flex;
        }

        /* Animation du burger quand actif (optionnel) */
        .hamburger.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
        .hamburger.active span:nth-child(2) { opacity: 0; }
        .hamburger.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

        /* Le menu devient un panneau d√©roulant */
        nav {
          position: absolute;
          top: 100%; /* Juste en dessous du header */
          left: 0;
          width: 100%;
          background-color: var(--rose);
          flex-direction: column;
          align-items: center;
          padding: 0;
          max-height: 0; /* Cach√© par d√©faut */
          overflow: hidden;
          transition: max-height 0.4s ease-in-out; /* Animation fluide */
          box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }

        /* Classe ajout√©e par JS pour ouvrir le menu */
        nav.open {
          max-height: 350px; /* Assez haut pour contenir les liens */
          padding: 1rem 0;
        }

        nav a {
          margin: 10px 0;
          font-size: 1.1rem;
          width: 100%;
          text-align: center;
          padding: 0.5rem 0;
        }

        /* 2. Sections et Typographie */
        .hero { padding: 4rem 1rem; }
        .hero h2 { font-size: 2rem; }
        .hero-logo { width: 220px; } /* Logo hero plus petit */

        .products, .professionals, .find-us, .contact {
          padding: 3rem 1rem; /* R√©duction du padding lat√©ral */
        }
        
        h3 { font-size: 1.6rem !important; }

        /* 3. Grille produits */
        .product-grid {
          /* Permet d'avoir 2 colonnes sur les gros t√©l√©phones, 1 sur les petits */
          grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
          gap: 1rem; 
        }

        .product {
          padding: 1rem; 
        }

        .product h4 { font-size: 1.1rem; }
        
        /* 4. Formulaires */
        .product-selector-group { flex-direction: column; }
        .product-selector-group select, 
        .product-selector-group input, 
        .add-product-btn { width: 100%; }

        .location-list li {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
    </style>
  </head>
  <body>
    
    <!-- HEADER AVEC HAMBURGER -->
    <header>
      <img src="Gazella_Logo.png" alt="Logo Gazella" />
      
      <!-- Bouton Hamburger -->
      <button class="hamburger" id="hamburger-btn" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <nav id="nav-menu">
        <a href="#produits" class="nav-link">Produits</a>
        <a href="#professionals" class="nav-link">Professionnels</a>
        <a href="#find-us" class="nav-link">Points de vente</a>
        <a href="#contact" class="nav-link">Contact</a>
      </nav>
    </header>

    <section class="hero">
      <img src="Gazella_Logo.png" alt="Logo Gazella" class="hero-logo" />
      <h2>Ton instant sucr√©</h2>
      <p>
        Des g√¢teaux faits maison avec passion et des saveurs qui font fondre le
        c≈ìur.
      </p>
      <button
        onclick="document.getElementById('produits').scrollIntoView({behavior:'smooth'})"
      >
        D√©couvrir nos douceurs
      </button>
    </section>

    <section id="produits" class="products">
      <h3>Nos gourmandises</h3>
      <div id="product-grid" class="product-grid">
        <!-- Products generated by JS -->
      </div>
    </section>

    <section id="professionals" class="professionals">
      <h3>Vous √™tes un professionnel ?</h3>
      <p>
        Gazella propose des partenariats pour la distribution de nos p√¢tisseries
        artisanales.
      </p>
      <div class="professional-buttons">
        <a href="#contact">Contactez-nous pour une distribution</a>
      </div>
    </section>

    <section id="find-us" class="find-us">
      <h3>Trouvez nos produits</h3>
      <ul class="location-list">
        <li>
          <span>Le march√© Granby</span>
          <a href="https://www.google.ca/maps/place/Le+march%C3%A9+Granby" target="_blank">Voir sur la carte</a>
        </li>
        <li>
          <span>Caf√© Douce Heure</span>
          <a href="#" target="_blank">Voir sur la carte</a>
        </li>
        <li>
          <span>√âpicerie Fine Gourmande</span>
          <a href="#" target="_blank">Voir sur la carte</a>
        </li>
      </ul>
    </section>

    <!-- JAVASCRIPT -->
    <script>
      // 1. GESTION DU MENU MOBILE
      const hamburgerBtn = document.getElementById('hamburger-btn');
      const navMenu = document.getElementById('nav-menu');
      const navLinks = document.querySelectorAll('.nav-link');

      // Ouvrir/Fermer au clic sur le burger
      hamburgerBtn.addEventListener('click', () => {
        navMenu.classList.toggle('open');
        hamburgerBtn.classList.toggle('active');
      });

      // Fermer le menu quand on clique sur un lien
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          navMenu.classList.remove('open');
          hamburgerBtn.classList.remove('active');
        });
      });

      // --- LOGIQUE PRODUITS EXISTANTE ---
      const productData = {
        "products": [
          { "id": 1, "name": "Tiramisu", "description": "Un classique revisit√©.", "image": "product3.jpg", "price": 5.99, "available": true },
          { "id": 2, "name": "Tiramisu Pistache", "description": "Onctueux √† la pistache.", "image": "product5.jpg", "price": 6.99, "available": true },
          { "id": 3, "name": "Tiramisu Chocolat", "description": "Explosion de cacao.", "image": "product6.jpg", "price": 5.99, "available": true },
          { "id": 4, "name": "Box Mini-Brownies", "description": "12 petits carr√©s moelleux.", "image": "brownies.jpg", "price": 9.99, "available": true },
          { "id": 5, "name": "Cheesecake", "description": "Cr√©meux et vari√©.", "image": "product1.jpg", "price": 4.99, "available": true },
          { "id": 6, "name": "Cookies", "description": "8 cookies dor√©s.", "image": "product2.jpg", "price": 1.99, "available": true }
        ]
      };

      let selectedOrder = [];

      function loadProducts() {
        const productGrid = document.getElementById("product-grid");
        productData.products.forEach((product) => {
          const productElement = document.createElement("div");
          productElement.className = "product";
          productElement.innerHTML = `
            <img src="${product.image}" alt="${product.name}" />
            <h4>${product.name}</h4>
            <p>${product.description}</p>
            <p class="price">${product.price.toFixed(2)} CAD</p>
            ${
              product.available
                ? `<div class="product-add-controls">
                    <input type="number" value="1" min="1" id="quantity-${product.id}" />
                    <button onclick="addProductToOrder(${product.id}, event)">Ajouter</button>
                   </div>`
                : '<p class="unavailable">Indisponible</p>'
            }
          `;
          productGrid.appendChild(productElement);
        });
      }

      function populateProductSelector() {
        const productSelect = document.getElementById("product-select");
        productSelect.innerHTML = '<option value="">-- Choisir un produit --</option>';
        productData.products.forEach(product => {
          if (product.available) {
            const option = document.createElement("option");
            option.value = product.id;
            option.textContent = `${product.name} (${product.price.toFixed(2)}CAD)`;
            productSelect.appendChild(option);
          }
        });
      }

      function addProductToOrder(productIdFromButton = null, event = null) {
        let selectedProductId, quantity, targetButton;

        if (productIdFromButton) {
          selectedProductId = productIdFromButton;
          quantity = parseInt(document.getElementById(`quantity-${productIdFromButton}`).value);
          if(event) targetButton = event.target;
        } else {
          selectedProductId = parseInt(document.getElementById("product-select").value);
          quantity = parseInt(document.getElementById("product-quantity").value);
          targetButton = document.getElementById("add-to-order-btn");
        }

        if (!selectedProductId || quantity <= 0 || isNaN(quantity)) {
          alert("Veuillez s√©lectionner un produit et une quantit√© valide.");
          return;
        }

        const product = productData.products.find(p => p.id === selectedProductId);
        if (product) {
          const existingItem = selectedOrder.find(item => item.id === product.id);
          if (existingItem) existingItem.quantity += quantity;
          else selectedOrder.push({ ...product, quantity: quantity }); // Simplifi√© pour la d√©mo

          renderOrderSummary();
          updateCartIcon();
          
          // Feedback visuel
          if(targetButton) {
             const originalText = targetButton.textContent;
             targetButton.textContent = "Ajout√© !";
             targetButton.classList.add("added-feedback");
             setTimeout(() => {
                 targetButton.textContent = originalText;
                 targetButton.classList.remove("added-feedback");
             }, 1500);
          }
        }
      }

      function removeProductFromOrder(id) {
        selectedOrder = selectedOrder.filter(item => item.id !== id);
        renderOrderSummary();
        updateCartIcon();
      }

      function renderOrderSummary() {
        const summaryDiv = document.getElementById("selected-products-summary");
        summaryDiv.innerHTML = "";
        let total = 0;
        
        if (selectedOrder.length === 0) {
            summaryDiv.innerHTML = "<p>Aucun produit s√©lectionn√©.</p>";
            updateContactMessage();
            return;
        }

        selectedOrder.forEach(item => {
          total += item.price * item.quantity;
          const p = document.createElement("p");
          p.innerHTML = `${item.name} x ${item.quantity} - ${(item.price * item.quantity).toFixed(2)} CAD <button class="remove-product-btn" onclick="removeProductFromOrder(${item.id})">‚úñ</button>`;
          summaryDiv.appendChild(p);
        });
        
        const totalP = document.createElement("p");
        totalP.style.fontWeight = "bold";
        totalP.innerHTML = `Total: ${total.toFixed(2)} CAD`;
        summaryDiv.appendChild(totalP);
        
        updateContactMessage();
      }

      function updateContactMessage() {
        // Logique simplifi√©e pour l'exemple (m√™me que votre code original)
        const messageTextarea = document.getElementById("contact-message");
        let msg = "Commande:\n";
        selectedOrder.forEach(i => msg += `- ${i.name} x ${i.quantity}\n`);
        
        // Ajout des infos formulaire
        const date = document.getElementById("delivery-date").value;
        const time = document.getElementById("delivery-time").value;
        if(date) msg += `\nDate: ${date}`;
        if(time) msg += `\nHeure: ${time}`;

        messageTextarea.value = msg;
        
        // Update WhatsApp link
        const waLink = document.querySelector(".whatsapp");
        if(waLink) waLink.href = "https://wa.me/15147029219?text=" + encodeURIComponent(msg);
      }

      function updateCartIcon() {
        const count = selectedOrder.reduce((sum, item) => sum + item.quantity, 0);
        document.getElementById("cart-count").textContent = count;
        
        // Animation
        const icon = document.getElementById("cart-icon");
        icon.classList.add("added"); // Si vous avez la classe CSS d'animation
        setTimeout(() => icon.classList.remove("added"), 800);
      }

      document.addEventListener("DOMContentLoaded", () => {
        loadProducts();
        populateProductSelector();
        
        // Scroll logo effect
        const heroLogo = document.querySelector(".hero-logo");
        window.addEventListener("scroll", () => {
            if(window.innerWidth > 768) { // Seulement sur desktop pour l'effet de taille
                let newWidth = 300 - window.scrollY;
                if (newWidth < 100) newWidth = 100; // Limite min
                heroLogo.style.width = `${newWidth}px`;
            }
        });
        
        // Listeners formulaire
        const formInputs = document.querySelectorAll("#orderForm input, #orderForm select");
        formInputs.forEach(input => input.addEventListener("change", updateContactMessage));
        
        // Gestion soumission (Google Apps Script dummy)
        document.getElementById("orderForm").addEventListener("submit", (e) => {
            e.preventDefault();
            alert("Simulation: Commande envoy√©e !");
            // Ici, gardez votre code fetch() original
        });

        // Click panier
        document.getElementById("cart-icon").addEventListener("click", () => {
             document.getElementById("contact").scrollIntoView({ behavior: "smooth" });
        });
      });
    </script>

    <section id="contact" class="contact">
      <h3>Contact & Commandes</h3>
      <p>Envie de sucr√© ? Commandez ci-dessous.</p>

      <form id="orderForm">
        <input type="text" id="contact-name" name="NomClient" placeholder="Votre nom" required />
        <input type="text" id="contact-email" name="ContactClient" placeholder="Email ou T√©l√©phone" required />
        <textarea rows="2" id="contact-allergies" name="Allergies" placeholder="Allergies..."></textarea>

        <div class="form-group">
          <label>M√©thode :</label>
          <div class="radio-group">
            <label><input type="radio" name="MethodeRecuperation" value="Ramassage" checked> Ramassage</label>
            <label><input type="radio" name="MethodeRecuperation" value="Livraison"> Livraison</label>
          </div>
        </div>

        <div class="form-group">
            <label>Date :</label>
            <input type="date" id="delivery-date" name="DateSouhaitee" required>
        </div>
        
        <div class="form-group">
            <label>Heure :</label>
            <select id="delivery-time" name="PlageHoraireSouhaitee">
                <option value="">-- Heure --</option>
                <option value="9h-12h">9h - 12h</option>
                <option value="12h-15h">12h - 15h</option>
                <option value="15h-18h">15h - 18h</option>
                <option value="Soir">18h+</option>
            </select>
        </div>

        <div class="product-selector-group">
          <select id="product-select"></select>
          <input type="number" id="product-quantity" value="1" min="1" />
          <button type="button" id="add-to-order-btn" class="add-product-btn">Ajouter</button>
        </div>

        <div id="selected-products-summary"><p>Panier vide.</p></div>

        <textarea rows="4" id="contact-message" name="DetailsCommande" placeholder="Votre message..." required></textarea>
        <button type="submit">Envoyer la commande</button>
      </form>

      <div class="social-buttons">
        <a class="whatsapp" href="#" target="_blank">üì± WhatsApp</a>
        <a class="instagram" href="#" target="_blank">üì∏ Instagram</a>
      </div>
    </section>

    <footer>¬© 2025 Gazella ‚Äî Granby, Qu√©bec</footer>

    <div id="cart-icon" class="cart-icon">
        üõí<span id="cart-count" class="cart-count">0</span>
    </div>
  </body>
</html>
